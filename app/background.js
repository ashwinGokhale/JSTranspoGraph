(function () {"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var path=_interopDefault(require("path")),url=_interopDefault(require("url")),electron=require("electron"),jetpack=_interopDefault(require("fs-jetpack")),devMenuTemplate={label:"Development",submenu:[{label:"Reload",accelerator:"CmdOrCtrl+R",click:function(){electron.BrowserWindow.getFocusedWindow().webContents.reloadIgnoringCache()}},{label:"Toggle DevTools",accelerator:"Alt+CmdOrCtrl+I",click:function(){electron.BrowserWindow.getFocusedWindow().toggleDevTools()}},{label:"Quit",accelerator:"CmdOrCtrl+Q",click:function(){electron.app.quit()}}]},editMenuTemplate={label:"Edit",submenu:[{label:"Undo",accelerator:"CmdOrCtrl+Z",selector:"undo:"},{label:"Redo",accelerator:"Shift+CmdOrCtrl+Z",selector:"redo:"},{type:"separator"},{label:"Cut",accelerator:"CmdOrCtrl+X",selector:"cut:"},{label:"Copy",accelerator:"CmdOrCtrl+C",selector:"copy:"},{label:"Paste",accelerator:"CmdOrCtrl+V",selector:"paste:"},{label:"Select All",accelerator:"CmdOrCtrl+A",selector:"selectAll:"}]},createWindow=function(e,t){var r=jetpack.cwd(electron.app.getPath("userData")),n="window-state-"+e+".json",o={width:t.width,height:t.height},a={},l=void 0,i=function(){var e=l.getPosition(),t=l.getSize();return{x:e[0],y:e[1],width:t[0],height:t[1]}},c=function(e,t){return e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height},u=function(){var e=electron.screen.getPrimaryDisplay().bounds;return Object.assign({},o,{x:(e.width-o.width)/2,y:(e.height-o.height)/2})};return a=function(e){return electron.screen.getAllDisplays().some(function(t){return c(e,t.bounds)})?e:u()}(function(){var e={};try{e=r.read(n,"json")}catch(e){}return Object.assign({},o,e)}()),(l=new electron.BrowserWindow(Object.assign({},t,a))).on("close",function(){l.isMinimized()||l.isMaximized()||Object.assign(a,i()),r.write(n,a,{atomic:!0})}),l},env=jetpack.cwd(__dirname).read("env.json","json"),setApplicationMenu=function(){var e=[editMenuTemplate];"production"!==env.name&&e.push(devMenuTemplate),electron.Menu.setApplicationMenu(electron.Menu.buildFromTemplate(e))};if("production"!==env.name){var userDataPath=electron.app.getPath("userData");electron.app.setPath("userData",userDataPath+" ("+env.name+")")}electron.app.on("ready",function(){setApplicationMenu();var e=createWindow("main",{width:1700,height:900});e.loadURL(url.format({pathname:path.join(__dirname,"app.html"),protocol:"file:",slashes:!0})),"development"===env.name&&e.openDevTools()}),electron.app.on("window-all-closed",function(){electron.app.quit()});

}());
//# sourceMappingURL=background.js.map